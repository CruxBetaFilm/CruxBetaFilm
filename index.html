<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Crux&Beta Film - Portafolio</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800;900&display=swap" rel="stylesheet"/>
  <style>
    :root{--gold:#c8a035;--gold-3:#f3e2a5;--border:rgba(255,255,255,.14)}
    body{font-family:'Inter',system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;background:#0b0b0b;color:#eee}
    .panel{position:relative;background:linear-gradient(180deg,rgba(255,255,255,.03),rgba(255,255,255,.02));border:1px solid var(--border);box-shadow:0 20px 50px rgba(0,0,0,.6);backdrop-filter:blur(8px);border-radius:16px}
    .tabbar{display:flex;gap:.5rem;flex-wrap:wrap;justify-content:center}
    .tab-btn{padding:.55rem 1rem;border:1px solid rgba(200,160,53,.45);border-radius:9999px;font-weight:800;letter-spacing:.2px;background:rgba(255,255,255,.02);color:var(--gold-3);cursor:pointer;transition:.18s}
    .tab-btn:hover{transform:translateY(-1px);filter:brightness(1.06)}
    .tab-btn.active{background:linear-gradient(180deg,var(--gold-3),var(--gold));color:#111;box-shadow:0 8px 22px rgba(200,160,53,.28)}
    .subtabs{display:flex;gap:.5rem;flex-wrap:wrap;justify-content:center;margin:.75rem 0 1.25rem}
    .subtab-btn{padding:.4rem .85rem;border:1px dashed rgba(200,160,53,.35);border-radius:9999px;font-weight:700;color:#e7e7e7;background:rgba(255,255,255,.02);cursor:pointer;transition:.18s}
    .subtab-btn.active{border-style:solid;color:#111;background:linear-gradient(180deg,var(--gold-3),var(--gold))}

    .grid-wrap{display:grid;grid-template-columns:repeat(1,minmax(0,1fr));gap:14px}
    @media(min-width:640px){.grid-wrap{grid-template-columns:repeat(2,minmax(0,1fr))}}
    @media(min-width:1024px){.grid-wrap{grid-template-columns:repeat(3,minmax(0,1fr))}}
    @media(min-width:1280px){.grid-wrap{grid-template-columns:repeat(4,minmax(0,1fr))}}

    .slot{position:relative;border:1px solid var(--border);border-radius:14px;overflow:hidden;background:rgba(255,255,255,.04);box-shadow:0 0 0 1px rgba(255,255,255,.02) inset, 0 20px 60px -20px rgba(0,0,0,.6);transition:transform .22s, box-shadow .22s, border-color .22s}
    .slot:hover{transform:translateY(-3px);box-shadow:0 0 0 1px rgba(212,175,55,.18) inset, 0 30px 80px -20px rgba(212,175,55,.25);border-color:rgba(212,175,55,.35)}
    .slot img{display:block;width:100%;height:220px;object-fit:cover;filter:grayscale(28%) contrast(105%);transition:filter .2s}
    .slot:hover img{filter:grayscale(0%) contrast(110%)}

    .slot--empty{display:flex;align-items:center;justify-content:center;height:220px;border:1px dashed rgba(200,160,53,.35);background:linear-gradient(180deg,rgba(255,255,255,.015),rgba(255,255,255,.03));color:#cbb77a;border-radius:14px}
    .slot--empty .plus{font-size:28px;line-height:1;opacity:.7}
    .slot--badge{position:absolute;left:10px;bottom:10px;background:rgba(0,0,0,.55);border:1px solid rgba(255,255,255,.18);backdrop-filter:blur(4px);padding:4px 8px;border-radius:10px;font-size:12px;color:#fff}

    dialog#lightbox::backdrop{background:rgba(0,0,0,.85)}
    dialog#lightbox[open]{padding:0;border:0;background:transparent}
    #lbImg{max-width:92vw;max-height:92vh;border-radius:12px}
    .lb-ctrl{position:absolute;top:50%;transform:translateY(-50%);background:rgba(0,0,0,.6);color:#fff;border:1px solid rgba(255,255,255,.25);width:44px;height:44px;border-radius:999px;display:flex;align-items:center;justify-content:center;font-size:24px}
    .lb-ctrl:hover{background:rgba(0,0,0,.8)}
  </style>
</head>
<body>
  <section class="min-h-screen flex items-center justify-center px-4 py-10">
    <div class="panel max-w-7xl w-full p-6 sm:p-10 bg-black/40">
      <h2 class="text-4xl font-extrabold mb-6 text-center">Portafolio</h2>

      <!-- Tabs principales: Fotografía / Video -->
      <div class="tabbar mb-6" role="tablist" aria-label="Categorías principales">
        <button class="tab-btn active" data-tab="fotografia" role="tab" aria-controls="tab-fotografia">Fotografía</button>
        <button class="tab-btn" data-tab="video" role="tab" aria-controls="tab-video">Video</button>
      </div>

      <!-- FOTOGRAFÍA -->
      <section id="tab-fotografia" class="tab-pane">
        <div class="subtabs" role="tablist" aria-label="Subcategorías fotografía">
          <button class="subtab-btn active" data-subtab="producto" role="tab" aria-controls="sub-producto">Producto</button>
          <button class="subtab-btn" data-subtab="registro" role="tab" aria-controls="sub-registro">Registro</button>
        </div>
        <div id="sub-producto" class="subpane">
          <div class="grid-wrap" id="grid-producto" aria-live="polite"></div>
        </div>
        <div id="sub-registro" class="subpane hidden">
          <div class="grid-wrap" id="grid-registro" aria-live="polite"></div>
        </div>
      </section>

      <!-- VIDEO -->
      <section id="tab-video" class="tab-pane hidden">
        <div class="subtabs" role="tablist" aria-label="Subcategorías video">
          <button class="subtab-btn active" data-subtab="general" role="tab" aria-controls="sub-general">General</button>
          <button class="subtab-btn" data-subtab="redes" role="tab" aria-controls="sub-redes">Redes Sociales</button>
        </div>
        <div id="sub-general" class="subpane">
          <div class="grid-wrap" id="grid-video-general" aria-live="polite"></div>
        </div>
        <div id="sub-redes" class="subpane hidden">
          <div class="grid-wrap" id="grid-video-redes" aria-live="polite"></div>
        </div>
      </section>
    </div>
  </section>

  <!-- Lightbox para fotos -->
  <dialog id="lightbox">
    <div class="relative">
      <button id="lbPrev" class="lb-ctrl" style="left:8px" aria-label="Anterior">‹</button>
      <img id="lbImg" alt="Foto" />
      <button id="lbNext" class="lb-ctrl" style="right:8px" aria-label="Siguiente">›</button>
    </div>
  </dialog>

  <!-- Modal simple para video (embed YouTube/Vimeo si se provee url) -->
  <dialog id="videoModal" style="padding:0;border:0;background:transparent">
    <div style="position:relative;width:min(92vw,1000px);aspect-ratio:16/9;background:#000;border-radius:12px;overflow:hidden">
      <iframe id="videoFrame" src="" allowfullscreen style="position:absolute;inset:0;width:100%;height:100%;border:0"></iframe>
    </div>
  </dialog>

  <script>
    // ====== Datos (edita estas listas) ======
    // FOTOGRAFÍA - hasta 50 c/u. Si la lista está vacía, NO se muestran placeholders.
    const FOTOS_PRODUCTO = [
      // Agrega hasta 50 URLs
      'https://images.unsplash.com/photo-1542152399-6e3e150d8977?q=80&w=1600&auto=format&fit=crop',
      'https://images.unsplash.com/photo-1579705707736-218206d2d0a0?q=80&w=1600&auto=format&fit=crop',
      'https://images.unsplash.com/photo-1620712948210-e5559c5d140e?q=80&w=1600&auto=format&fit=crop',
    ];
    const FOTOS_REGISTRO = [
      // Agrega hasta 50 URLs
      'https://images.unsplash.com/photo-1596727409244-a957b11d94be?q=80&w=1600&auto=format&fit=crop',
      'https://images.unsplash.com/photo-1558299105-e414c52f754b?q=80&w=1600&auto=format&fit=crop',
    ];

    // VIDEO - exactamente 10 slots visibles por subcategoría. Rellena con tus URLs (YouTube/Vimeo/mp4)
    const VIDEOS_GENERAL = [
      'https://www.youtube.com/embed/dQw4w9WgXcQ',
      'https://player.vimeo.com/video/76979871'
      // hasta 10
    ];
    const VIDEOS_REDES = [
      // hasta 10
    ];

    // ====== Render ======
    const gridProducto = document.getElementById('grid-producto');
    const gridRegistro = document.getElementById('grid-registro');
    const gridVideoGen = document.getElementById('grid-video-general');
    const gridVideoRed = document.getElementById('grid-video-redes');

    function renderFotos(list, grid){
      grid.innerHTML = '';
      if(!list || list.length===0){
        grid.parentElement.classList.add('hidden');
        return;
      }
      grid.parentElement.classList.remove('hidden');
      list.slice(0,50).forEach((src,i)=>{
        const a = document.createElement('a');
        a.href = src; a.className = 'slot'; a.setAttribute('data-photo-index', i);
        a.innerHTML = `<img src="${src}" alt="Foto ${i+1}"><span class="slot--badge">${i+1}</span>`;
        a.addEventListener('click', (e)=>{ e.preventDefault(); openLightbox(list, i); });
        grid.appendChild(a);
      });
    }

    function renderVideos(list, grid){
      grid.innerHTML='';
      const MAX=10;
      const filled = (list||[]).slice(0,MAX);
      // slots llenos
      filled.forEach((url,i)=>{
        const div = document.createElement('div'); div.className='slot';
        div.innerHTML = `<img src="https://img.youtube.com/vi/${extractYouTubeId(url)||'default'}/hqdefault.jpg" alt="Video ${i+1}"><span class='slot--badge'>${i+1}/10</span>`;
        div.addEventListener('click', ()=> openVideo(url));
        grid.appendChild(div);
      });
      // slots vacíos
      for(let i=filled.length;i<MAX;i++){
        const ph = document.createElement('div'); ph.className='slot--empty';
        ph.innerHTML = `<div class='plus'>+ slot ${i+1}/10</div>`;
        grid.appendChild(ph);
      }
    }

    function extractYouTubeId(url){
      if(!url) return null;
      const m = String(url).match(/(?:youtube\.com\/(?:embed\/|watch\?v=)|youtu\.be\/)([\w-]{6,})/);
      return m?m[1]:null;
    }

    // ====== Lightbox fotos ======
    const lb = document.getElementById('lightbox');
    const lbImg = document.getElementById('lbImg');
    const lbPrev = document.getElementById('lbPrev');
    const lbNext = document.getElementById('lbNext');
    let currentList = []; let currentIdx = 0;

    function openLightbox(list, index){
      currentList = list; currentIdx = index;
      lbImg.src = list[index];
      if(typeof lb.showModal==='function') lb.showModal(); else lb.setAttribute('open','');
    }
    function lbNav(step){
      if(!currentList.length) return;
      currentIdx = (currentIdx + step + currentList.length) % currentList.length;
      lbImg.src = currentList[currentIdx];
    }
    lbPrev.addEventListener('click', ()=> lbNav(-1));
    lbNext.addEventListener('click', ()=> lbNav(1));
    lb.addEventListener('click', (e)=>{
      const r = lbImg.getBoundingClientRect();
      const outside = e.clientX < r.left || e.clientX > r.right || e.clientY < r.top || e.clientY > r.bottom;
      if(outside) lb.close();
    });
    window.addEventListener('keydown', (e)=>{ if(!lb.open) return; if(e.key==='ArrowLeft') lbNav(-1); if(e.key==='ArrowRight') lbNav(1); if(e.key==='Escape') lb.close(); });

    // ====== Video modal ======
    const vModal = document.getElementById('videoModal');
    const vFrame = document.getElementById('videoFrame');
    function openVideo(url){ vFrame.src = url; if(typeof vModal.showModal==='function') vModal.showModal(); else vModal.setAttribute('open',''); }
    vModal.addEventListener('click',(e)=>{ const box = vFrame.getBoundingClientRect(); const outside = e.clientX<box.left||e.clientX>box.right||e.clientY<box.top||e.clientY>box.bottom; if(outside){ vFrame.src=''; vModal.close(); }});

    // ====== Tabs principales ======
    const mainTabs = document.querySelectorAll('.tab-btn');
    const panes = { fotografia: document.getElementById('tab-fotografia'), video: document.getElementById('tab-video') };
    mainTabs.forEach(btn=>{
      btn.addEventListener('click',()=>{
        mainTabs.forEach(b=>b.classList.remove('active'));
        btn.classList.add('active');
        const t = btn.dataset.tab;
        Object.entries(panes).forEach(([k,el])=> el.classList.toggle('hidden', k!==t));
      });
    });

    // ====== Subtabs Fotografía ======
    const fotoSubBtns = document.querySelectorAll('#tab-fotografia .subtab-btn');
    const subFoto = { producto: document.getElementById('sub-producto'), registro: document.getElementById('sub-registro') };
    fotoSubBtns.forEach(btn=>{
      btn.addEventListener('click',()=>{
        fotoSubBtns.forEach(b=>b.classList.remove('active'));
        btn.classList.add('active');
        const t = btn.dataset.subtab;
        Object.entries(subFoto).forEach(([k,el])=> el.classList.toggle('hidden', k!==t));
      });
    });

    // ====== Subtabs Video ======
    const videoSubBtns = document.querySelectorAll('#tab-video .subtab-btn');
    const subVid = { general: document.getElementById('sub-general'), redes: document.getElementById('sub-redes') };
    videoSubBtns.forEach(btn=>{
      btn.addEventListener('click',()=>{
        videoSubBtns.forEach(b=>b.classList.remove('active'));
        btn.classList.add('active');
        const t = btn.dataset.subtab;
        Object.entries(subVid).forEach(([k,el])=> el.classList.toggle('hidden', k!==t));
      });
    });

    // Render inicial
    renderFotos(FOTOS_PRODUCTO, gridProducto);
    renderFotos(FOTOS_REGISTRO, gridRegistro);
    renderVideos(VIDEOS_GENERAL, gridVideoGen);
    renderVideos(VIDEOS_REDES, gridVideoRed);
  </script>
</body>
</html>
